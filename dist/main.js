(()=>{"use strict";(()=>{function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class n{constructor(e){t(this,"countryDetails",void 0),t(this,"el",void 0),this.countryDetails=e,this.el=document.createElement("div"),this.container=document.querySelector("#container"),this.modal=document.querySelector(".modal"),this.modalBody=document.querySelector(".modal-body"),this.body=document.querySelector("body")}show(){this.render(),this.modalBody.classList.remove("hidden"),this.modal.classList.remove("hidden"),this.modal.appendChild(this.el),this.body.style.overflow="hidden",this.initializeEvents()}hide(){this.modalBody.classList.add("hidden"),this.body.style.overflow="scroll",this.modal.innerHTML=""}render(){this.el.innerHTML=`\n    <div class="ui message">   \n      <div class="modal-header">\n        <h2>${this.countryDetails.name}</h2>\n        <img class="ui circular small image" src="${this.countryDetails.flag}">\n      </div>\n      <div class="country-details">\n      <table class="ui very basic table">\n      <tbody>\n        <tr>\n          <td>\n            <h4 class="ui image header">\n               <i class="icon city"></i>\n              <div class="content">Capital</div>\n          </h4></td>\n          <td>${this.countryDetails.capital}</td>\n        </tr>\n       <tr>\n         <td>\n           <h4 class="ui image header">\n              <i class="icon map"></i>\n             <div class="content">Region</div>\n         </h4></td>\n         <td>${this.countryDetails.subregion}</td>\n       </tr>\n       <tr>\n         <td>\n           <h4 class="ui image header">\n              <i class="icon compress arrows alternate"></i>\n             <div class="content">Area</div>\n         </h4></td>\n         <td>${this.countryDetails.area.toLocaleString()}</td>\n       </tr>\n       <tr>\n         <td>\n           <h4 class="ui image header">\n              <i class="icon users"></i>\n             <div class="content">Population</div>\n         </h4></td>\n         <td>${this.countryDetails.population.toLocaleString()}</td>\n       </tr>\n       <tr>\n        <td>\n          <h4 class="ui image header">\n            <i class="icon flag"></i>\n            <div class="content">Language</div>\n        </h4></td>\n        <td>${this.renderLanguages()}</td>\n      </tr>\n      <tr>\n        <td>\n          <h4 class="ui image header">\n            <i class="icon money"></i>\n            <div class="content">Currency</div>\n        </h4></td>\n        <td>${this.renderCurrencies()}</td>\n      </tr>\n      </tbody>\n  </table>\n      <button class="negative circular ui icon button close-button">\n      <i class="icon times"></i>\n      </button>\n      </div>\n  </div>\n  `}initializeEvents(){document.querySelector(".close-button").addEventListener("click",(()=>{this.hide()}))}renderLanguages(){return this.countryDetails.languages.map((e=>`<span>${e.name} </span`)).join("")}renderCurrencies(){return this.countryDetails.currencies.map((e=>`<p>${e.name}/${e.code} </p>`)).join("")}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e){i(this,"countryDetails",void 0),i(this,"modal",void 0),i(this,"el",void 0),this.countryDetails=e,this.modal=new n(e),this.el=document.createElement("div")}render(){this.el.classList.add("ui","card"),this.el.innerHTML=`\n    <div class="content">\n      <h4 class="header">${this.countryDetails.name}</h4>\n    </div>\n    <div class="image">\n      <img id="${this.countryDetails.alpha2Code}-flag" class="ui image country-flag" src="${this.countryDetails.flag}"></img>\n    </div>\n  `}initializeEvents(){document.querySelector(`#${this.countryDetails.alpha2Code}-flag`).addEventListener("click",(()=>{this.modal.show()}))}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=new class{constructor(t){e(this,"countryService",void 0),e(this,"el",void 0),this.countryService=t,this.el=document.createElement("div")}async initialize(){await this.countryService.fetch(),this.render(),this.initializeEvents()}initializeEvents(){document.querySelector("#search").addEventListener("keyup",(async e=>{await this.countryService.fetch(e.target.value),this.render()}))}async render(){if(0===this.countryService.countries.length)return void(document.querySelector("#container").innerHTML='<div class="not-found">Name not found</div>');const e=document.querySelector("#container");e.innerHTML="",this.countryService.countries.forEach((t=>{t.render(),e.appendChild(t.el),t.initializeEvents()}))}}(new class{constructor(){r(this,"countries",[]),r(this,"handleError",(()=>{this.countries=[]}))}async fetch(e){return e?fetch(`https://restcountries.eu/rest/v2/name/${e}`).then((e=>e.json())).then((e=>{this.countries=e.map((e=>new s(e)))})).catch(this.handleError):fetch("https://restcountries.eu/rest/v2/all").then((e=>e.json())).then((e=>{this.countries=e.map((e=>new s(e)))})).catch(this.handleError)}get countries(){return this.countries}});document.addEventListener("DOMContentLoaded",(async()=>{a.initialize()}))})()})();
//# sourceMappingURL=main.js.map